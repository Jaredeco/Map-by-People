{%extends "base.html"%}
{% block title %}
Create Marker
{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="{{url_for('.static', filename='css/createmarker_style.css')}}">
{% endblock %}

{% block content%}
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Your Places</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/">Map<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/marker_info">Places</a>
        </li>
      </ul>
    </div>
  </nav>


   <h2>Create marker</h2>
   <form class="form-contact comment_form" action="/create_marker" id="commentForm" method="POST" enctype="multipart/form-data">
      <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
              <input class="form-control" name="address" id="address" type="text" placeholder="Location" value="{{ad}}" required="">
               <input class="form-control" name="name" id="name" type="text" placeholder="Name of the location" required="">
            </div>
         <div class="col-12">
            <div class="form-group">
               <textarea class="form-control w-100" name="texta" id="comment" cols="30" rows="9"
                  placeholder="Write Comment" style="resize: none;" required=""></textarea>
            </div>
         </div>
              <div class="container">
                  <fieldset class="form-group">
                      <a   style="color: green;" href="javascript:void(0)" onclick="$('#pro-image').click()">Upload Image</a>
                      <a   style="color: red;" href="javascript:void(0)" onclick="$('#pro-image').click()">Remove Images</a>
                      <input type="file" accept="image/*"  id="pro-image" name="image" style="display: none;" class="form-control" multiple>
                  </fieldset>
                  <div class="preview-images-zone">
                  </div>


              </div>
              <script>
                $(document).ready(function() {
                  document.getElementById('pro-image').addEventListener('change', readImage, false);
                  
                  $( ".preview-images-zone" ).sortable();
                  
                  // $(document).on('click', '.image-cancel', function() {
                  //     let no = $(this).data('no');
                  //     $(".preview-image.preview-show-"+no).remove();
                  // });
              });
              var num = 1;
              function readImage() {
                  if (window.File && window.FileList && window.FileReader) {
                      var files = event.target.files; //FileList object
                      var output = $(".preview-images-zone");

                      for (let i = 0; i < files.length; i++) {
                          var file = files[i];
                          if (!file.type.match('image')) continue;
                          
                          var picReader = new FileReader();
                          
                          picReader.addEventListener('load', function (event) {
                              var picFile = event.target;
                              var html =  '<div class="preview-image preview-show-' + num + '">' +
                                          // '<div class="image-cancel" data-no="' + num + '">x</div>' +
                                          '<div class="image-zone"><img id="pro-img-' + num + '" src="' + picFile.result + '"></div>'

                              output.append(html);
                              num = num + 1;
                          });

                          picReader.readAsDataURL(file);
                      }
                      $("#pro-image").val('');
                  } else {
                      console.log('Browser not support');
                  }
              }
              </script>
         
         
         <div class="form-group">
            <button type="submit" class="button button-contactForm btn_1 boxed-btn">Create</button>
         </div>
         </form>
         </div>
       </div>
       
         


       
{%block scripts%}
{% endblock %}
{% endblock %}

